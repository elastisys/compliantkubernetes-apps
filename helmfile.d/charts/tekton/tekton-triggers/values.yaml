# version -- Tekton triggers version used to add labels on deployments, pods and services
version: v0.23.0

# nameOverride -- Partially override resource generated names
nameOverride: ""

# fullnameOverride -- Fully override resource generated names
fullnameOverride: ""

rbac:
  # rbac.create -- Create RBAC resources
  create: true

  # rbac.serviceAccountName -- Name of the service account to use when rbac.create is false
  serviceAccountName:

podSecurityPolicy:
  # podSecurityPolicy.enabled -- Enable pod security policy
  enabled: false

config:
  defaults:
    _example: |
      ################################
      #                              #
      #    EXAMPLE CONFIGURATION     #
      #                              #
      ################################

      # This block is not actually functional configuration,
      # but serves to illustrate the available configuration
      # options and document them in a way that is accessible
      # to users that `kubectl edit` this config map.
      #
      # These sample configuration options may be copied out of
      # this example block and unindented to be in the data block
      # to actually change the configuration.

      # default-service-account contains the default service account name
      # to use for TaskRun and PipelineRun, if none is specified.
      default-service-account: "default"
  # config.logging -- Configuration for logging (see https://github.com/tektoncd/pipeline/blob/master/docs/install.md)
  # @default -- See [values.yaml](./values.yaml)
  logging:
    # Common configuration for all knative codebase
    zap-logger-config: |
      {
        "level": "info",
        "development": false,
        "disableStacktrace": true,
        "sampling": {
          "initial": 100,
          "thereafter": 100
        },
        "outputPaths": ["stdout"],
        "errorOutputPaths": ["stderr"],
        "encoding": "json",
        "encoderConfig": {
          "timeKey": "timestamp",
          "levelKey": "severity",
          "nameKey": "logger",
          "callerKey": "caller",
          "messageKey": "message",
          "stacktraceKey": "stacktrace",
          "lineEnding": "",
          "levelEncoder": "",
          "timeEncoder": "iso8601",
          "durationEncoder": "",
          "callerEncoder": ""
        }
      }
    # Log level overrides
    loglevel.controller: "info"
    loglevel.webhook: "info"
    loglevel.eventlistener: "info"

  # config.observability -- Configuration for observability (see https://github.com/tektoncd/pipeline/blob/master/docs/install.md)
  # @default -- See [values.yaml](./values.yaml)
  observability:
    _example: |
      ################################
      #                              #
      #    EXAMPLE CONFIGURATION     #
      #                              #
      ################################

      # This block is not actually functional configuration,
      # but serves to illustrate the available configuration
      # options and document them in a way that is accessible
      # to users that `kubectl edit` this config map.
      #
      # These sample configuration options may be copied out of
      # this example block and unindented to be in the data block
      # to actually change the configuration.

      # metrics.backend-destination field specifies the system metrics destination.
      # It supports either prometheus (the default) or stackdriver.
      # Note: Using stackdriver will incur additional charges
      metrics.backend-destination: prometheus

      # metrics.stackdriver-project-id field specifies the stackdriver project ID. This
      # field is optional. When running on GCE, application default credentials will be
      # used if this field is not provided.
      metrics.stackdriver-project-id: "<your stackdriver project id>"

      # metrics.allow-stackdriver-custom-metrics indicates whether it is allowed to send metrics to
      # Stackdriver using "global" resource type and custom metric type if the
      # metrics are not supported by "knative_revision" resource type. Setting this
      # flag to "true" could cause extra Stackdriver charge.
      # If metrics.backend-destination is not Stackdriver, this is ignored.
      metrics.allow-stackdriver-custom-metrics: "false"


controller:
  image:
    # controller.image.repository -- Controller docker image repository
    repository: gcr.io/tekton-releases/github.com/tektoncd/triggers/cmd/controller:v0.23.0@sha256

    # controller.image.tag -- Controller docker image tag
    tag: c2214d61de40962f44d3896912af0a9a1f0375719a2658441b34dbf49ccab4ae

    # controller.image.pullPolicy -- Controller docker image pull policy
    pullPolicy: IfNotPresent

  # controller.annotations -- Controller pod annotations
  # @default -- See [values.yaml](./values.yaml)
  annotations: {}

  # controller.nodeSelector -- Controller node selector
  nodeSelector: {}

  # controller.affinity -- Controller affinity rules
  affinity: {}

  # controller.tolerations -- Controller tolerations
  tolerations: []

  # controller.resources -- Controller resource limits and requests
  resources:
    limits:
      cpu: 200m
      memory: 200Mi
    requests:
      cpu: 100m
      memory: 100Mi

  # controller.securityContext -- Controller pods security context
  securityContext: {}

  # controller.args -- Controller arguments
  # @default -- See [values.yaml](./values.yaml)
  args:
    - -logtostderr
    - -stderrthreshold
    - INFO
    - -el-image
    - gcr.io/tekton-releases/github.com/tektoncd/triggers/cmd/eventlistenersink:v0.23.0@sha256:461da4733670e6d17793ca108d5e8d54b79d129936d09dade66cf9c36723e1de
    - -el-port
    - 8080
    - -el-security-context=true
    - -el-events
    - disable
    - -el-readtimeout
    - 5
    - -el-writetimeout
    - 40
    - -el-idletimeout
    - 120
    - -el-timeouthandler
    - 30
    - -el-httpclient-readtimeout
    - 30
    - -el-httpclient-keep-alive
    - 30
    - -el-httpclient-tlshandshaketimeout
    - 10
    - -el-httpclient-responseheadertimeout
    - 10
    - -el-httpclient-expectcontinuetimeout
    - 1
    - -period-seconds
    - 10
    - -failure-threshold
    - 1

  service:
    # controller.service.type -- Controller service type
    type: ClusterIP

    # controller.service.annotations -- Controller service annotations
    annotations: {}

  metrics:
    # controller.metrics.enabled -- Enable controller metrics service
    enabled: true

    # controller.metrics.port -- Controller metrics service port
    port: 9090

    # controller.metrics.service.portName -- Controller metrics service port name
    portName: metrics

webhook:
  image:
    # webhook.image.repository -- Webhook docker image repository
    repository: gcr.io/tekton-releases/github.com/tektoncd/triggers/cmd/webhook:v0.23.0@sha256

    # webhook.image.tag -- Webhook docker image tag
    tag: be693e766466c1391414631cedd8b3a7f37637b5918299e4fd1e56e718370531

    # webhook.image.pullPolicy -- Webhook docker image pull policy
    pullPolicy: IfNotPresent

  # webhook.replicas -- Webhook replicas
  replicas: 1

  # webhook.annotations -- Webhook pod annotations
  # @default -- See [values.yaml](./values.yaml)
  annotations:
    cluster-autoscaler.kubernetes.io/safe-to-evict: 'false'

  # webhook.nodeSelector -- Webhook node selector
  nodeSelector: {}

  # webhook.affinity -- Webhook affinity rules
  affinity: {}

  # webhook.tolerations -- Webhook tolerations
  tolerations: []

  # webhook.resources -- Webhook resource limits and requests
  resources:
    limits:
      cpu: 200m
      memory: 200Mi
    requests:
      cpu: 100m
      memory: 100Mi

  # webhook.updateStrategy -- Webhook pods update strategy
  updateStrategy: {}

  # webhook.securityContext -- Webhook pods security context
  securityContext: {}

  podDisruptionBudget:
    # webhook.podDisruptionBudget.enabled -- Enable pod disruption budget for webhook
    ennabled: false

    # webhook.podDisruptionBudget.minAvailable -- Minimum available webhook pods
    minAvailable: 1

    # webhook.podDisruptionBudget.maxUnavailable -- Maximum unavailable webhook pods
    maxUnavailable: 1

  service:
    # webhook.service.type -- Webhook service type
    type: ClusterIP

    # webhook.service.annotations -- Webhook service annotations
    annotations: {}

  metrics:
    # webhook.metrics.enabled -- Enable webhook metrics service
    enabled: true

    # webhook.metrics.port -- Webhook metrics service port
    port: 9090

    # webhook.metrics.portName -- Webhook metrics service port name
    portName: http-metrics

  profiling:
    # webhook.profiling.enabled -- Enable pebhook profiling service
    enabled: true

    # webhook.profiling.port -- Webhook profiling service port
    port: 8008

    # webhook.profiling.portName -- Webhook profiling service port name
    portName: http-profiling

interceptors:
  image:
    # webhook.image.repository -- Webhook docker image repository
    repository: gcr.io/tekton-releases/github.com/tektoncd/triggers/cmd/interceptors:v0.23.0@sha256

    # webhook.image.tag -- Webhook docker image tag
    tag: 2cafc082b5c1991a80715333c56dbf43066412736487ae102b8deb6dfc932750

    # webhook.image.pullPolicy -- Webhook docker image pull policy
    pullPolicy: IfNotPresent

  # webhook.replicas -- Webhook replicas
  replicas: 1

  # webhook.annotations -- Webhook pod annotations
  # @default -- See [values.yaml](./values.yaml)
  annotations:
    cluster-autoscaler.kubernetes.io/safe-to-evict: 'false'

  # webhook.nodeSelector -- Webhook node selector
  nodeSelector: {}

  # webhook.affinity -- Webhook affinity rules
  affinity: {}

  # webhook.tolerations -- Webhook tolerations
  tolerations: []

  # webhook.resources -- Webhook resource limits and requests
  resources:
    limits:
      cpu: 200m
      memory: 200Mi
    requests:
      cpu: 100m
      memory: 100Mi

  # webhook.updateStrategy -- Webhook pods update strategy
  updateStrategy: {}

  # webhook.securityContext -- Webhook pods security context
  securityContext: {}

  podDisruptionBudget:
    # webhook.podDisruptionBudget.enabled -- Enable pod disruption budget for webhook
    ennabled: false

    # webhook.podDisruptionBudget.minAvailable -- Minimum available webhook pods
    minAvailable: 1

    # webhook.podDisruptionBudget.maxUnavailable -- Maximum unavailable webhook pods
    maxUnavailable: 1

  service:
    # webhook.service.type -- Webhook service type
    type: ClusterIP

    # webhook.service.annotations -- Webhook service annotations
    annotations: {}
