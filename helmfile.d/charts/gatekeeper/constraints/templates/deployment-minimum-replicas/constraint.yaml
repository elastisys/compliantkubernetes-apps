apiVersion: constraints.gatekeeper.sh/v1beta1
kind: K8sMinimumReplicas
metadata:
  name: elastisys-warn-minimum-replicas
spec:
  enforcementAction: warn
  match:
    kinds:
    - apiGroups:
      - apps
      kinds:
      - Deployment
      - StatefulSet
    excludedNamespaces:
      - alertmanager
      - calico-apiserver
      - calico-system
      - cert-manager
      - falco
      - fluentd
      - fluentd-system
      - gatekeeper-system
      - gpu-operator
      - hnc-system
      - ingress-nginx
      - kube-note-lease
      - kube-public
      - kube-system
      - monitoring
      - tiger-operator
      - velero
    parameters:
        - min_replicas: 2
