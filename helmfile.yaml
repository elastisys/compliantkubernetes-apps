---
missingFileHandler: Error
bases:
  - helmfile/bases/v2environments.yaml
  - helmfile/bases/v2upstream.yaml
---
bases:
  - helmfile/stacks/cert-manager.yaml
  - helmfile/stacks/gatekeeper.yaml
  - helmfile/stacks/ingress-nginx.yaml
  - helmfile/stacks/monitoring.yaml
  - helmfile/stacks/monitoring-grafana.yaml
  - helmfile/stacks/monitoring-prometheus.yaml
  - helmfile/stacks/opensearch.yaml
  - helmfile/stacks/system.yaml
---
releases:
  - inherit: [ template: networkpolicies-common ]
  - inherit: [ template: networkpolicies-service ]
  - inherit: [ template: networkpolicies-workload ]

  - inherit: [ template: cert-manager-controller ]
  - inherit: [ template: cert-manager-issuers ]

  - inherit: [ template: gatekeeper-controller ]
  - inherit: [ template: gatekeeper-templates ]
  - inherit: [ template: gatekeeper-constraints ]
  - inherit: [ template: gatekeeper-mutations ]
  - inherit: [ template: gatekeeper-metrics ]

  - inherit: [ template: ingress-nginx-podsecuritypolicy ]
  - inherit: [ template: ingress-nginx-controller ]

  - inherit: [ template: monitoring-networkpolicy ]
  - inherit: [ template: monitoring-podsecuritypolicy ]
  - inherit: [ template: kube-prometheus-stack ]

  - inherit: [ template: grafana-admin ]
  - inherit: [ template: grafana-dev ]
  - inherit: [ template: grafana-label-enforcer ]
  - inherit: [ template: grafana-dashboards ]

  - inherit: [ template: opensearch-podsecuritypolicy ]
  - inherit: [ template: opensearch-secrets ]
  - inherit: [ template: opensearch-master ]
  - inherit: [ template: opensearch-client ]
  - inherit: [ template: opensearch-data ]
  - inherit: [ template: opensearch-dashboards ]
  - inherit: [ template: opensearch-securityadmin ]
  - inherit: [ template: opensearch-configurer ]
  - inherit: [ template: opensearch-backup ]
  - inherit: [ template: opensearch-slm ]
  - inherit: [ template: opensearch-curator ]
  - inherit: [ template: opensearch-exporter ]

# NAME                                     	NAMESPACE        	ENABLED	INSTALLED	LABELS                                                                                                  	CHART                                                            	VERSION
# networkpolicy                            	harbor           	true   	true     	app:netpol,netpol:harbor                                                                                	./charts/networkpolicy/generator                                 	0.1.0
# networkpolicy                            	thanos           	true   	true     	app:netpol,netpol:thanos                                                                                	./charts/networkpolicy/generator                                 	0.1.0
# kube-state-metrics-extra-resource-metrics	monitoring       	true   	true     	app:kube-prometheus-stack                                                                               	./charts/kube-state-metrics-extra-resource-metrics               	0.1.0
# thanos-ingress-secret                    	thanos           	true   	true     	app:thanos                                                                                              	./charts/thanos/ingress-secret                                   	0.1.0
# podsecuritypolicy                        	falco            	true   	true     	app:psp,component:gatekeeper-psp,psp:falco                                                              	./charts/gatekeeper/podsecuritypolicies                          	0.1.0
# podsecuritypolicy                        	fluentd-system   	true   	true     	app:psp,component:gatekeeper-psp,psp:fluentd                                                            	./charts/gatekeeper/podsecuritypolicies                          	0.1.0
# podsecuritypolicy                        	kured            	true   	true     	app:psp,component:gatekeeper-psp,psp:kured                                                              	./charts/gatekeeper/podsecuritypolicies                          	0.1.0
# podsecuritypolicy                        	velero           	true   	true     	app:psp,component:gatekeeper-psp,psp:velero                                                             	./charts/gatekeeper/podsecuritypolicies                          	0.1.0
# podsecuritypolicy                        	rook-ceph        	true   	false    	app:psp,component:gatekeeper-psp,psp:rook-ceph                                                          	./charts/gatekeeper/podsecuritypolicies                          	0.1.0
# podsecuritypolicy                        	harbor           	true   	true     	app:psp,component:gatekeeper-psp,psp:harbor                                                             	./charts/gatekeeper/podsecuritypolicies                          	0.1.0
# kured                                    	kured            	true   	true     	app:kured,upstream:kubereboot                                                                           	./upstream/kubereboot/kured                                      	4.5.1
# kured-secret                             	kured            	true   	false    	app:kured                                                                                               	./charts/kured-secret                                            	0.1.0
# trivy-operator                           	monitoring       	true   	true     	app:trivy-operator,group:trivy,upstream:aquasecurity                                                    	./upstream/aquasecurity/trivy-operator                           	0.13.0
# velero                                   	velero           	true   	true     	app:velero,upstream:vmware-tanzu                                                                        	./upstream/vmware-tanzu/velero                                   	3.1.6
# node-local-dns                           	kube-system      	true   	true     	app:node-local-dns                                                                                      	./charts/node-local-dns                                          	0.1.1
# metrics-server                           	kube-system      	true   	true     	app:metrics-server,upstream:kubernetes-metrics-server                                                   	./upstream/kubernetes-metrics-server/metrics-server              	3.10.0
# calico-accountant                        	calico-system    	true   	true     	app:calico-accountant                                                                                   	./charts/calico-accountant                                       	0.1.0
# calico-felix-metrics                     	kube-system      	true   	true     	app:calico-felix-metrics                                                                                	./charts/calico-felix-metrics                                    	0.1.0
# prometheus-blackbox-exporter             	monitoring       	true   	true     	app:blackbox,upstream:prometheus-community                                                              	./upstream/prometheus-community/prometheus-blackbox-exporter     	8.2.0
# cluster-admin-rbac                       	kube-system      	true   	true     	app:cluster-admin-rbac                                                                                  	./charts/cluster-admin-rbac                                      	0.1.0
# falco                                    	falco            	true   	true     	app:falco,upstream:falcosecurity                                                                        	./upstream/falcosecurity/falco                                   	3.8.3
# falco-exporter                           	falco            	true   	true     	app:falco-exporter,upstream:falcosecurity                                                               	./upstream/falcosecurity/falco-exporter                          	0.9.7
# calico-default-deny                      	kube-system      	true   	false    	app:calico-default-deny                                                                                 	./charts/calico-default-deny                                     	0.1.0
# dex                                      	dex              	true   	true     	app:dex,upstream:dexidp                                                                                 	./upstream/dexidp/dex                                            	0.14.1
# sc-servicemonitor                        	monitoring       	true   	true     	app:prometheus-servicemonitor,prometheus:sc                                                             	./charts/prometheus-servicemonitor                               	0.1.1
# sc-alerts                                	monitoring       	true   	true     	app:prometheus-alerts,prometheus:sc                                                                     	./charts/prometheus-alerts                                       	0.1.1
# harbor-certs                             	harbor           	true   	true     	app:harbor,component:harbor-certs,group:harbor,harbor:certs                                             	./charts/harbor/harbor-certs                                     	0.1.0
# harbor                                   	harbor           	true   	true     	app:harbor,component:harbor,group:harbor,harbor:harbor,upstream:goharbor                                	./upstream/goharbor/harbor                                       	1.12.2
# init-harbor                              	harbor           	true   	true     	app:harbor,component:harbor-init,group:harbor,harbor:init                                               	./charts/harbor/init-harbor                                      	0.2.0
# harbor-backup                            	harbor           	true   	true     	app:harbor,component:harbor-backup,group:harbor,harbor:backup                                           	./charts/harbor/harbor-backup                                    	0.1.0
# thanos-objectstorage-secret              	thanos           	true   	true     	app:thanos,upstream:bitnami                                                                             	./upstream/bitnami/thanos                                        	12.6.2
# thanos-receiver                          	thanos           	true   	true     	app:thanos,upstream:bitnami                                                                             	./upstream/bitnami/thanos                                        	12.6.2
# thanos-query                             	thanos           	true   	true     	app:thanos,upstream:bitnami                                                                             	./upstream/bitnami/thanos                                        	12.6.2
# thanos-ruler                             	thanos           	true   	true     	app:thanos-ruler                                                                                        	./charts/thanos/ruler                                            	0.1.0
# s3-exporter                              	monitoring       	true   	true     	app:s3-exporter                                                                                         	./charts/s3-exporter                                             	0.1.0
# fluentd-aggregator                       	fluentd-system   	true   	true     	app:fluentd,component:fluentd-aggregator,upstream:bitnami                                               	./upstream/bitnami/fluentd                                       	5.8.2
# fluentd-forwarder                        	fluentd-system   	true   	true     	app:fluentd,component:fluentd-forwarder,upstream:kokuwa                                                 	./upstream/kokuwa/fluentd-elasticsearch                          	13.10.0
# log-manager                              	fluentd-system   	true   	true     	app:fluentd,component:log-manager                                                                       	./charts/log-manager                                             	0.1.0
# rclone-sync                              	rclone           	true   	false    	app:rclone-sync                                                                                         	./charts/rclone-sync                                             	0.1.0
# openstack-monitoring                     	kube-system      	true   	true     	app:openstack-monitoring                                                                                	./charts/openstack-monitoring                                    	0.1.0
# autoscaling-monitoring-sc                	capi-cluster     	true   	false    	app:autoscaling-monitoring-sc,group:autoscaling-monitoring                                              	./charts/autoscaling-monitoring                                  	0.1.0
# autoscaling-monitoring-wc                	capi-cluster     	true   	false    	app:autoscaling-monitoring-wc,group:autoscaling-monitoring                                              	./charts/autoscaling-monitoring                                  	0.1.0
